<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุณุงุจูุฉ ุฑูุถุงู ุงูููููุฉ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #0f172a;
            color: white;
        }
        
        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .timer-bar {
            height: 10px;
            background-color: #22c55e;
            border-radius: 5px;
            transition: width 1s linear;
        }
        
        .option-disabled {
            pointer-events: none;
            opacity: 0.7;
        }
        
        .option-correct {
            background-color: rgba(34, 197, 94, 0.2) !important;
            border-color: #22c55e !important;
        }
        
        .option-wrong {
            background-color: rgba(239, 68, 68, 0.2) !important;
            border-color: #ef4444 !important;
        }
        
        .bg-pattern {
            background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }
    </style>
</head>
<body class="bg-pattern min-h-screen">
    <div class="quiz-container">
        <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
        <div id="start-screen" class="hidden py-8 text-center">
            <div class="bg-white/10 backdrop-blur-sm p-6 rounded-xl shadow-lg">
                <h1 class="text-3xl font-bold text-green-400 mb-2">ูุณุงุจูุฉ ุฑูุถุงู ุงูููููุฉ</h1>
                <div class="flex justify-center items-center gap-2 mb-4">
                    <span id="day-name" class="text-sm bg-white/5 px-2 py-1 rounded"></span>
                    <span id="current-date" class="text-sm bg-white/5 px-2 py-1 rounded"></span>
                </div>
                <p class="mb-6 text-white/80">ุฃุฌุจ ุนูู ุงูุฃุณุฆูุฉ ุจุณุฑุนุฉ ูุฏูุฉ ูุชุญุตู ุนูู ุฃุนูู ุงูููุงุท!</p>
                
                <div class="mb-4">
                    <label for="player-name" class="block text-sm font-medium text-white/80 mb-2">ุงูุงุณู ุงูุซูุงุซู</label>
                    <input type="text" id="player-name" class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-400" placeholder="ุฃุฏุฎู ุงุณูู ุงูุซูุงุซู" required>
                </div>
                
                <button id="start-button" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl transition-colors opacity-50 cursor-not-allowed" disabled>
                    ุงุจุฏุฃ ุงููุณุงุจูุฉ
                </button>
            </div>
        </div>
        
        <!-- ุดุงุดุฉ ุฎุงุฑุฌ ููุช ุงููุณุงุจูุฉ -->
        <div id="out-of-time-screen" class="hidden py-8 text-center">
            <div class="bg-white/10 backdrop-blur-sm p-6 rounded-xl shadow-lg">
                <h1 class="text-3xl font-bold text-yellow-400 mb-2">ุงููุณุงุจูุฉ ุบูุฑ ูุชุงุญุฉ ุญุงููุงู</h1>
                <div class="flex justify-center items-center gap-2 mb-4">
                    <span id="day-name-out" class="text-sm bg-white/5 px-2 py-1 rounded"></span>
                    <span id="current-date-out" class="text-sm bg-white/5 px-2 py-1 rounded"></span>
                </div>
                <p id="time-message" class="mb-4 text-white/80"></p>
                <div class="flex items-center justify-center gap-2 text-yellow-400">
                    <i data-lucide="clock" class="w-5 h-5"></i>
                    <span>ุชููุฏ ูุฐู ุงูุตูุญุฉ ูุงุญูุงู</span>
                </div>
            </div>
        </div>
        
        <!-- ุดุงุดุฉ ุงููุดุงุฑูุฉ ุงูุณุงุจูุฉ -->
        <div id="already-participated-screen" class="hidden py-8 text-center">
            <div class="bg-white/10 backdrop-blur-sm p-6 rounded-xl shadow-lg">
                <h1 class="text-3xl font-bold text-blue-400 mb-2">ููุฏ ุดุงุฑูุช ูุณุจูุงู</h1>
                <div class="flex justify-center items-center gap-2 mb-4">
                    <span id="day-name-participated" class="text-sm bg-white/5 px-2 py-1 rounded"></span>
                    <span id="current-date-participated" class="text-sm bg-white/5 px-2 py-1 rounded"></span>
                </div>
                <p class="mb-4 text-white/80">ููุฏ ุดุงุฑูุช ุจุงููุนู ูู ูุณุงุจูุฉ ุงูููู. ููููู ุงููุดุงุฑูุฉ ูุฑุฉ ุฃุฎุฑู ุบุฏุงู!</p>
                <div class="flex items-center justify-center gap-2 text-blue-400">
                    <i data-lucide="calendar" class="w-5 h-5"></i>
                    <span>ุนุฏ ุบุฏุงู ูููุดุงุฑูุฉ ูุฌุฏุฏุงู</span>
                </div>
            </div>
        </div>
        
        <!-- ุดุงุดุฉ ุงูุนุฏ ุงูุชูุงุฒูู -->
        <div id="countdown-screen" class="hidden fixed inset-0 flex items-center justify-center bg-gray-900/90 z-50">
            <div class="text-center">
                <div class="text-8xl font-bold text-green-400 mb-4" id="countdown-number">5</div>
                <div class="text-xl text-white/80" id="countdown-text">ุงุณุชุนุฏ ุงูุชุญุฏู ุณูุจุฏุฃ! ๐ฅ</div>
            </div>
        </div>
        
        <!-- ุดุงุดุฉ ุงูุฃุณุฆูุฉ -->
        <div id="quiz-screen" class="hidden py-8">
            <div class="bg-white/10 backdrop-blur-sm p-6 rounded-xl shadow-lg">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="player-welcome" class="font-bold text-xl"></h2>
                    <span id="question-counter" class="bg-white/5 px-3 py-1 rounded-lg text-sm"></span>
                </div>
                
                <div class="mb-2 flex items-center justify-between">
                    <span class="text-sm text-white/80">ุงูููุช ุงููุชุจูู:</span>
                    <span id="timer" class="font-bold text-xl">10</span>
                </div>
                
                <div class="w-full bg-white/5 rounded-full h-2.5 mb-6">
                    <div id="timer-bar" class="timer-bar w-full"></div>
                </div>
                
                <div class="mb-6">
                    <h3 id="question-text" class="text-lg font-medium mb-4"></h3>
                    <div id="options-container" class="space-y-3"></div>
                </div>
            </div>
        </div>
        
        <!-- ุดุงุดุฉ ุงููุชุงุฆุฌ -->
        <div id="results-screen" class="hidden py-8">
            <div class="bg-white/10 backdrop-blur-sm p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-bold text-green-400 mb-4">ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</h2>
                
                <div class="bg-white/5 p-4 rounded-xl mb-6">
                    <div id="final-name" class="font-bold mb-2"></div>
                    <div id="final-score"></div>
                </div>
                
                <h3 class="text-xl font-bold mb-3">ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช</h3>
                <div id="answers-review" class="space-y-4"></div>
                
                <div class="mt-6 flex justify-center">
                    <button onclick="location.reload()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ุชููุฆุฉ Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDfaDyhgBV7oEwzDCUcW45aDg4Xst5l4Ks",
            authDomain: "ramadan-quiz-app.firebaseapp.com",
            projectId: "ramadan-quiz-app",
            storageBucket: "ramadan-quiz-app.appspot.com",
            messagingSenderId: "59633973982",
            appId: "1:59633973982:web:c4b68e6f0bb14b5ec7e611"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        // ุจูู ุงูุฃุณุฆูุฉ
        const ramadanQuestions = {
            15: [ // ุงูููู 15 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุณูู ุจู 'ููุจ ุงููุฑุขู'ุ",
                    options: ["ุณูุฑุฉ ูุณ", "ุณูุฑุฉ ุงูุฑุญูู", "ุณูุฑุฉ ุงูุฅุฎูุงุต", "ุณูุฑุฉ ุงูููู"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ูููุจ ุจู 'ุฃููู ุงูุฃูุฉ'ุ",
                    options: ["ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุนูู ุจู ุฃุจู ุทุงูุจ", "ุฃุจู ุนุจูุฏุฉ ุจู ุงูุฌุฑุงุญ", "ุนุซูุงู ุจู ุนูุงู"],
                    correct: 2
                },
                {
                    question: "ูุง ูู ุฃูู ูุณุฌุฏ ุจููู ูู ุงูุฅุณูุงูุ",
                    options: ["ุงููุณุฌุฏ ุงููุจูู", "ุงููุณุฌุฏ ุงูุญุฑุงู", "ูุณุฌุฏ ูุจุงุก", "ุงููุณุฌุฏ ุงูุฃูุตู"],
                    correct: 2
                },
                {
                    question: "ูุง ูู ุงููููุฉ ุงูุชู ุชุนุงุฏู ุงูุนุจุงุฏุฉ ูููุง ุฃูุซุฑ ูู ุฃูู ุดูุฑุ",
                    options: ["ูููุฉ ุงููุตู ูู ุดุนุจุงู", "ูููุฉ ุงููุฏุฑ", "ูููุฉ ุงูุฅุณุฑุงุก ูุงููุนุฑุงุฌ", "ูููุฉ ุงูุนูุฏ"],
                    correct: 1
                },
                {
                    question: "ูู ุนุฏุฏ ุงูุฃูุจูุงุก ุงููุฐููุฑูู ูู ุงููุฑุขู ุงููุฑููุ",
                    options: ["25", "124000", "313", "5"],
                    correct: 0
                }
            ],
            16: [ // ุงูููู 16 ูู ุฑูุถุงู
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ุจูู ุงูุณูููุฉ ูููุฌุงุฉ ูู ุงูุทููุงูุ",
                    options: ["ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุญ ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ุณูููุงู ุนููู ุงูุณูุงู"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุงูุดูุฑ ุงููุฌุฑู ุงูุฐู ุชููุฑุถ ููู ุงูุฒูุงุฉุ",
                    options: ["ุฑูุถุงู", "ุดูุงู", "ุฐู ุงูุญุฌุฉ", "ูุง ููุฌุฏ ุดูุฑ ูุญุฏุฏ"],
                    correct: 3
                },
                {
                    question: "ูุง ูู ุงูุฑูู ุงูุฎุงูุณ ูู ุฃุฑูุงู ุงูุฅุณูุงูุ",
                    options: ["ุงูุตูุงุฉ", "ุงูุฒูุงุฉ", "ุงูุตูู", "ุงูุญุฌ"],
                    correct: 3
                },
                {
                    question: "ูุง ุงุณู ุงูุบุฒูุฉ ุงูุชู ุงูุชุตุฑ ูููุง ุงููุณูููู ุฑุบู ููุฉ ุนุฏุฏููุ",
                    options: ["ุบุฒูุฉ ุจุฏุฑ", "ุบุฒูุฉ ุฃุญุฏ", "ุบุฒูุฉ ุงูุฎูุฏู", "ุบุฒูุฉ ุญููู"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุฃูู ูู ุฃุณูู ูู ุงูุฑุฌุงูุ",
                    options: ["ุฃุจู ุจูุฑ ุงูุตุฏูู", "ุนูู ุจู ุฃุจู ุทุงูุจ", "ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุฒูุฏ ุจู ุญุงุฑุซุฉ"],
                    correct: 1
                }
            ],
            17: [ // ุงูููู 17 ูู ุฑูุถุงู
                {
                    question: "ูู ุฃู ููู ูู ุฑูุถุงู ููุนุช ุบุฒูุฉ ุจุฏุฑ ุงููุจุฑูุ",
                    options: ["7 ุฑูุถุงู", "10 ุฑูุถุงู", "17 ุฑูุถุงู", "27 ุฑูุถุงู"],
                    correct: 2
                },
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ูุฒูุช ูุงููุฉ ูู ุงููุฏููุฉ ุงููููุฑุฉุ",
                    options: ["ุณูุฑุฉ ุงูุจูุฑุฉ", "ุณูุฑุฉ ุงููุงุชุญุฉ", "ุณูุฑุฉ ุงูุฅุฎูุงุต", "ุณูุฑุฉ ุงููุงุณ"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ูููุจ ุจู 'ุณูู ุงููู ุงููุณููู'ุ",
                    options: ["ุนูู ุจู ุฃุจู ุทุงูุจ", "ุฎุงูุฏ ุจู ุงููููุฏ", "ุณุนุฏ ุจู ุฃุจู ููุงุต", "ุฃุจู ุนุจูุฏุฉ ุจู ุงูุฌุฑุงุญ"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุฃูู ุนุงุตูุฉ ูู ุงูุชุงุฑูุฎ ุงูุฅุณูุงููุ",
                    options: ["ููุฉ ุงูููุฑูุฉ", "ุงููุฏููุฉ ุงููููุฑุฉ", "ุฏูุดู", "ุจุบุฏุงุฏ"],
                    correct: 1
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ูููู ุงููู ุชููููุงูุ",
                    options: ["ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ุนูุณู ุนููู ุงูุณูุงู", "ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู"],
                    correct: 1
                }
            ],
            18: [ // ุงูููู 18 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุนุฏู ุซูุซ ุงููุฑุขูุ",
                    options: ["ุณูุฑุฉ ุงูุฅุฎูุงุต", "ุณูุฑุฉ ุงููุงุชุญุฉ", "ุณูุฑุฉ ุงูููุซุฑ", "ุณูุฑุฉ ุงููุงุณ"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ุฏูู ุจุฌูุงุฑ ุงููุจู ูุญูุฏ ุตูู ุงููู ุนููู ูุณููุ",
                    options: ["ุนูู ุจู ุฃุจู ุทุงูุจ", "ุนุซูุงู ุจู ุนูุงู", "ุฃุจู ุจูุฑ ุงูุตุฏูู", "ุนูุฑ ุจู ุงูุฎุทุงุจ"],
                    correct: 2
                },
                {
                    question: "ูุง ูู ุงูุนุงู ุงูุฐู ุณูู ุจู 'ุนุงู ุงูุญุฒู'ุ",
                    options: ["ุงูุนุงู ุงูุฐู ุชููู ููู ุฃุจู ุทุงูุจ ูุงูุณูุฏุฉ ุฎุฏูุฌุฉ", "ุงูุนุงู ุงูุฐู ูุงุฌุฑ ููู ุงููุจู ุฅูู ุงููุฏููุฉ", "ุงูุนุงู ุงูุฐู ุชููู ููู ุงููุจู ูุญูุฏ", "ุงูุนุงู ุงูุฐู ุญูุตุฑ ููู ุงููุณูููู ูู ุดุนุจ ุฃุจู ุทุงูุจ"],
                    correct: 0
                },
                {
                    question: "ูุง ูู ุงูุญููุงู ุงููุฐููุฑ ูู ุณูุฑุฉ ุงููููุ",
                    options: ["ุงููููุฉ", "ุงููุฏูุฏ", "ููุงููุง", "ูุง ุดูุก ููุง ุณุจู"],
                    correct: 2
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ุฃููู ูู ุงููุงุฑ ููู ูุญุชุฑูุ",
                    options: ["ููุญ ุนููู ุงูุณูุงู", "ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ูููุณ ุนููู ุงูุณูุงู"],
                    correct: 1
                }
            ],
            19: [ // ุงูููู 19 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุฃุทูู ุขูุฉ ูู ุงููุฑุขู ุงููุฑููุ",
                    options: ["ุขูุฉ ุงููุฑุณู", "ุขูุฉ ุงูุฏูู", "ุขูุฉ ุงูููุฑ", "ุขูุฉ ุงูููุฑุงุซ"],
                    correct: 1
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ุงูุชุฒ ูููุชู ุนุฑุด ุงูุฑุญููุ",
                    options: ["ุญูุฒุฉ ุจู ุนุจุฏ ุงููุทูุจ", "ูุตุนุจ ุจู ุนููุฑ", "ุณุนุฏ ุจู ูุนุงุฐ", "ุนุจุฏ ุงููู ุจู ุฑูุงุญุฉ"],
                    correct: 2
                },
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ูุง ุชุจุฏุฃ ุจุงูุจุณููุฉุ",
                    options: ["ุณูุฑุฉ ุงูุชูุจุฉ", "ุณูุฑุฉ ุงููุงุชุญุฉ", "ุณูุฑุฉ ุงูุฅุฎูุงุต", "ุณูุฑุฉ ุงููุงุณ"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ุงุจุชูุนู ุงูุญูุชุ",
                    options: ["ูููุณ ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ุฃููุจ ุนููู ุงูุณูุงู", "ุฒูุฑูุง ุนููู ุงูุณูุงู"],
                    correct: 0
                },
                {
                    question: "ูุง ูู ุงูุดูุฑ ุงููุฌุฑู ุงูุฐู ููู ุดูุฑ ุฑูุถุงู ูุจุงุดุฑุฉุ",
                    options: ["ุดุนุจุงู", "ุดูุงู", "ุฐู ุงููุนุฏุฉ", "ูุญุฑู"],
                    correct: 1
                }
            ],
            20: [ // ุงูููู 20 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุณูู ุจู 'ุนุฑูุณ ุงููุฑุขู'ุ",
                    options: ["ุณูุฑุฉ ุงูุฑุญูู", "ุณูุฑุฉ ูุณ", "ุณูุฑุฉ ุงููุงูุนุฉ", "ุณูุฑุฉ ูุฑูู"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุฃูู ูู ูุชุจ ุงููุญู ูููุจู ูุญูุฏ ุตูู ุงููู ุนููู ูุณููุ",
                    options: ["ุนูู ุจู ุฃุจู ุทุงูุจ", "ุฒูุฏ ุจู ุซุงุจุช", "ุนุซูุงู ุจู ุนูุงู", "ุฃุจู ุจู ูุนุจ"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุงูุบุฒูุฉ ุงูุชู ุณูุงูุง ุงููู ุจู 'ููู ุงููุฑูุงู'ุ",
                    options: ["ุบุฒูุฉ ุจุฏุฑ", "ุบุฒูุฉ ุฃุญุฏ", "ุบุฒูุฉ ุงูุฎูุฏู", "ุบุฒูุฉ ุญููู"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ุนููู ุงููู ูุบุฉ ุงูุทูุฑ ูุงูุญููุงูุ",
                    options: ["ุฏุงูุฏ ุนููู ุงูุณูุงู", "ุณูููุงู ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ุนูุณู ุนููู ุงูุณูุงู"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุฃูู ูุง ูุฒู ูู ุงููุฑุขู ุงููุฑููุ",
                    options: ["ุณูุฑุฉ ุงููุงุชุญุฉ ูุงููุฉ", "ุฃูู ุฎูุณ ุขูุงุช ูู ุณูุฑุฉ ุงูุนูู", "ุณูุฑุฉ ุงูุฅุฎูุงุต", "ุขูุฉ ุงููุฑุณู"],
                    correct: 1
                }
            ],
            21: [ // ุงูููู 21 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุฐูุฑุช ูููุง ุงูุจุณููุฉ ูุฑุชููุ",
                    options: ["ุณูุฑุฉ ุงููุงุชุญุฉ", "ุณูุฑุฉ ุงูููู", "ุณูุฑุฉ ุงูุจูุฑุฉ", "ุณูุฑุฉ ุงูุฑุญูู"],
                    correct: 1
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ููุจ ุจู 'ุฐู ุงูููุฑูู'ุ",
                    options: ["ุฃุจู ุจูุฑ ุงูุตุฏูู", "ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุนุซูุงู ุจู ุนูุงู", "ุนูู ุจู ุฃุจู ุทุงูุจ"],
                    correct: 2
                },
                {
                    question: "ูุง ูู ุงูุดูุฑ ุงูุฐู ูุฑุถ ููู ุงูุตูุงู ุนูู ุงููุณููููุ",
                    options: ["ุดุนุจุงู", "ุฑูุถุงู", "ุฑุฌุจ", "ูุญุฑู"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุฃูู ูุจูุฉ ูููุณููููุ",
                    options: ["ุงููุณุฌุฏ ุงูุญุฑุงู", "ุงููุณุฌุฏ ุงููุจูู", "ุงููุณุฌุฏ ุงูุฃูุตู", "ูุณุฌุฏ ูุจุงุก"],
                    correct: 2
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ูุงู ุนูู ุงููู ุชุนุงูู 'ููุงู ุฑุณููุงู ูุจูุงู'ุ",
                    options: ["ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ุนูุณู ุนููู ุงูุณูุงู", "ุฅุณูุงุนูู ุนููู ุงูุณูุงู"],
                    correct: 3
                }
            ],
            22: [ // ุงูููู 22 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุณูู ุจู 'ุงููุงุถุญุฉ'ุ",
                    options: ["ุณูุฑุฉ ุงูุชูุจุฉ", "ุณูุฑุฉ ุงูููุงูููู", "ุณูุฑุฉ ุงููุณุฏ", "ุณูุฑุฉ ุงูููุฒุฉ"],
                    correct: 1
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ูุงู ูููุจ ุจู 'ุญุจุฑ ุงูุฃูุฉ'ุ",
                    options: ["ุนุจุฏ ุงููู ุจู ุนุจุงุณ", "ุนุจุฏ ุงููู ุจู ูุณุนูุฏ", "ุนุจุฏ ุงููู ุจู ุนูุฑ", "ุนุจุฏ ุงููู ุจู ุงูุฒุจูุฑ"],
                    correct: 0
                },
                {
                    question: "ูู ุฃู ุนุงู ูุงู ูุชุญ ููุฉุ",
                    options: ["ุงูุณูุฉ ุงูุซุงููุฉ ูููุฌุฑุฉ", "ุงูุณูุฉ ุงูุณุงุฏุณุฉ ูููุฌุฑุฉ", "ุงูุณูุฉ ุงูุนุงุดุฑุฉ ูููุฌุฑุฉ", "ุงูุณูุฉ ุงูุชุงุณุนุฉ ูููุฌุฑุฉ"],
                    correct: 0
                },
                {
                    question: "ูุง ูู ุขุฎุฑ ุณูุฑุฉ ูุฒูุช ูุงููุฉ ูู ุงููุฑุขู ุงููุฑููุ",
                    options: ["ุณูุฑุฉ ุงููุตุฑ", "ุณูุฑุฉ ุงูุชูุจุฉ", "ุณูุฑุฉ ุงููุงุฆุฏุฉ", "ุณูุฑุฉ ุงูุจูุฑุฉ"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ุฃูุชู ูุนุฌุฒุฉ ุฅุญูุงุก ุงูููุชูุ",
                    options: ["ููุณู ุนููู ุงูุณูุงู", "ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ุนูุณู ุนููู ุงูุณูุงู", "ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู"],
                    correct: 2
                }
            ],
            23: [ // ุงูููู 23 ูู ุฑูุถุงู
                {
                    question: "ูุง ุงุณู ุงููุฏููุฉ ุงูุชู ุฃุณุณูุง ุงููุจู ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู ุจุนุฏ ุงููุฌุฑุฉุ",
                    options: ["ููุฉ", "ุงููุฏููุฉ ุงููููุฑุฉ", "ุงูุทุงุฆู", "ุฏูุดู"],
                    correct: 1
                },
                {
                    question: "ุฃู ูู ุงูุตุญุงุจุฉ ูุงู ูุดููุฑูุง ุจุฑูุงูุฉ ุงูุฃุญุงุฏูุซ ูููู ุนูู 'ุญุจุฑ ุงูุฃูุฉ'ุ",
                    options: ["ุฃุจู ูุฑูุฑุฉ", "ุนุจุฏ ุงููู ุจู ูุณุนูุฏ", "ุณููุงู ุงููุงุฑุณู", "ูุนุงุฐ ุจู ุฌุจู"],
                    correct: 0
                }
            ],
            24: [ // ุงูููู 24 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุฃูู ุขูุฉ ูุฒูุช ูู ุงููุฑุขู ุงููุฑููุ",
                    options: ["ุงูุฑุฃ ุจุงุณู ุฑุจู", "ุงูุญูุฏ ููู ุฑุจ ุงูุนุงูููู", "ูุง ุฅูู ุฅูุง ุงููู", "ูุงููู ุงููุณุชุนุงู"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ุฃููุฐู ุงููู ูู ูุฑุนูู ุจุฃูุฑู ูู ุฎูุงู ุงูุจุญุฑ ุงูุฃุญูุฑุ",
                    options: ["ููุณู ุนููู ุงูุณูุงู", "ูุงุฑูู ุนููู ุงูุณูุงู", "ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุญ ุนููู ุงูุณูุงู"],
                    correct: 0
                },
                {
                    question: "ูุง ูู ุงูุฑูู ุงูุซุงูู ูู ุฃุฑูุงู ุงูุฅุณูุงู ุจุนุฏ ุงูุดูุงุฏุชููุ",
                    options: ["ุงูุตูุงุฉ", "ุงูุฒูุงุฉ", "ุงูุตูู", "ุงูุญุฌ"],
                    correct: 0
                },
                {
                    question: "ููููุง ููุฅูุฌููุ ูู ุฃู ูุฏููุฉ ูููุฏ ุนูุณู ุนููู ุงูุณูุงูุ",
                    options: ["ุงููุงุตุฑุฉ", "ุจูุช ูุญู", "ุงููุฏุณ", "ุฑููุง"],
                    correct: 1
                },
                {
                    question: "ูู ูู ุงูุฑุณูู ุงูุฐู ุจูุนุซ ูุจูู ุฅุณุฑุงุฆูู ููููุง ููุชูุฑุงุฉุ",
                    options: ["ููุณู ุนููู ุงูุณูุงู", "ุนูุณู ุนููู ุงูุณูุงู", "ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุญ ุนููู ุงูุณูุงู"],
                    correct: 0
                }
            ],
            25: [ // ุงูููู 25 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงููุชุงุจ ุงูููุฏุณ ูู ุงูุฏูุงูุฉ ุงููููุฏูุฉุ",
                    options: ["ุงูุฅูุฌูู", "ุงููุฑุขู", "ุงูุชูุฑุงุฉ", "ุงูุฒุจูุฑ"],
                    correct: 2
                },
                {
                    question: "ุฃู ูู ุงูุตุญุงุจุฉ ูุงู ูุนุฑูููุง ุจุฐูุงุฆู ูุจูุงุบุชู ูู ููู ุงูุฏููุ",
                    options: ["ุนุจุฏ ุงููู ุจู ุนุจุงุณ", "ุณููุงู ุงููุงุฑุณู", "ุณุนุฏ ุจู ูุนุงุฐ", "ุจูุงู ุจู ุฑุจุงุญ"],
                    correct: 0
                },
                {
                    question: "ูุง ูู ุนุงุตูุฉ ุงูุฏููุฉ ุงูุฃูููุฉุ",
                    options: ["ุจุบุฏุงุฏ", "ุฏูุดู", "ุงููุงูุฑุฉ", "ุงููููุฉ"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุงุณู ุงูููู ุงูุฐู ุญุงูุฑ ุฅุจุฑุงููู ุนููู ุงูุณูุงู ูู ุฑุจูุ",
                    options: ["ูุฑุนูู", "ุงูููุฑูุฏ", "ูุงูุงู", "ูุงุฑูู"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุงุณู ุงูุตุญุงุจู ุงูุฐู ูุงู ุฃูู ูู ุฃุฐู ููุตูุงุฉ ูู ุงูุฅุณูุงูุ",
                    options: ["ุจูุงู ุจู ุฑุจุงุญ", "ุนูู ุจู ุฃุจู ุทุงูุจ", "ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุฃุจู ุจูุฑ ุงูุตุฏูู"],
                    correct: 0
                }
            ],
            26: [ // ุงูููู 26 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุณูู ุจู 'ุฃู ุงููุฑุขู'ุ",
                    options: ["ุณูุฑุฉ ุงูุจูุฑุฉ", "ุณูุฑุฉ ุงููุงุชุญุฉ", "ุณูุฑุฉ ูุณ", "ุณูุฑุฉ ุงูุฑุญูู"],
                    correct: 1
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ููุจ ุจู 'ุงูุตุฏูู'ุ",
                    options: ["ุฃุจู ุจูุฑ", "ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุนุซูุงู ุจู ุนูุงู", "ุนูู ุจู ุฃุจู ุทุงูุจ"],
                    correct: 0
                },
                {
                    question: "ูุง ูู ุงููููุฉ ุงูุชู ูุชู ุชุญุฑู ูููุฉ ุงููุฏุฑ ูููุง ุบุงูุจุงูุ",
                    options: ["ูููุฉ 21 ูู ุฑูุถุงู", "ูููุฉ 23 ูู ุฑูุถุงู", "ูููุฉ 25 ูู ุฑูุถุงู", "ูููุฉ 27 ูู ุฑูุถุงู"],
                    correct: 3
                },
                {
                    question: "ูุง ูู ุงูุดูุฑ ุงููุฌุฑู ุงูุฐู ููุน ููู ุนูุฏ ุงูุฃุถุญูุ",
                    options: ["ุดูุงู", "ุฐู ุงููุนุฏุฉ", "ุฐู ุงูุญุฌุฉ", "ูุญุฑู"],
                    correct: 2
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ููุจ ุจู 'ุฃุจู ุงูุฃูุจูุงุก'ุ",
                    options: ["ููุญ ุนููู ุงูุณูุงู", "ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ุขุฏู ุนููู ุงูุณูุงู", "ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู"],
                    correct: 1
                }
            ],
            27: [ // ุงูููู 27 ูู ุฑูุถุงู
                {
                    question: "ูู ุฃู ูููุฉ ูู ุฑูุถุงู ููุนุชูุฏ ุฃู ูููุฉ ุงููุฏุฑ ุบุงูุจุงู ูุง ุชูููุ",
                    options: ["ูููุฉ 21", "ูููุฉ 23", "ูููุฉ 25", "ูููุฉ 27"],
                    correct: 3
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ููุจ ุจู 'ุฃุณุฏ ุงููู'ุ",
                    options: ["ุฎุงูุฏ ุจู ุงููููุฏ", "ุญูุฒุฉ ุจู ุนุจุฏ ุงููุทูุจ", "ุนูู ุจู ุฃุจู ุทุงูุจ", "ุณุนุฏ ุจู ุฃุจู ููุงุต"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุฐูุฑ ูููุง ูุตุฉ ุฃุตุญุงุจ ุงููููุ",
                    options: ["ุณูุฑุฉ ุงูุจูุฑุฉ", "ุณูุฑุฉ ุงูููู", "ุณูุฑุฉ ูุณ", "ุณูุฑุฉ ุงููุตุต"],
                    correct: 1
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ูุงู ุนูู ุงููู ุชุนุงูู 'ูููู ุงููู ููุณู ุชููููุง'ุ",
                    options: ["ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ุนูุณู ุนููู ุงูุณูุงู", "ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุฃูู ูุณุฌุฏ ูุถุน ูููุงุณ ูู ุงูุฃุฑุถุ",
                    options: ["ุงููุณุฌุฏ ุงููุจูู", "ุงููุณุฌุฏ ุงูุญุฑุงู", "ุงููุณุฌุฏ ุงูุฃูุตู", "ูุณุฌุฏ ูุจุงุก"],
                    correct: 1
                }
            ],
            28: [ // ุงูููู 28 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุณูู ุจู 'ุณูุงู ุงููุฑุขู'ุ",
                    options: ["ุณูุฑุฉ ุงูุจูุฑุฉ", "ุณูุฑุฉ ุงููุงุชุญุฉ", "ุณูุฑุฉ ูุณ", "ุณูุฑุฉ ุงูุฑุญูู"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ูุงู ุฃูู ูู ุฌูุน ุงููุฑุขู ูู ูุตุญู ูุงุญุฏุ",
                    options: ["ุฃุจู ุจูุฑ ุงูุตุฏูู", "ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุนุซูุงู ุจู ุนูุงู", "ุฒูุฏ ุจู ุซุงุจุช"],
                    correct: 2
                },
                {
                    question: "ูุง ูู ุงูุฑูู ุงูุฑุงุจุน ูู ุฃุฑูุงู ุงูุฅุณูุงูุ",
                    options: ["ุงูุดูุงุฏุฉ", "ุงูุตูุงุฉ", "ุงูุฒูุงุฉ", "ุงูุตูู"],
                    correct: 3
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ููุจ ุจู 'ูููู ุงููู'ุ",
                    options: ["ุฅุจุฑุงููู ุนููู ุงูุณูุงู", "ููุณู ุนููู ุงูุณูุงู", "ุนูุณู ุนููู ุงูุณูุงู", "ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุฃูู ุบุฒูุฉ ูู ุงูุฅุณูุงูุ",
                    options: ["ุบุฒูุฉ ุจุฏุฑ", "ุบุฒูุฉ ุฃุญุฏ", "ุบุฒูุฉ ุงูุฃุจูุงุก", "ุบุฒูุฉ ุญููู"],
                    correct: 2
                }
            ],
            29: [ // ุงูููู 29 ูู ุฑูุถุงู
                {
                    question: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ูุฒูุช ูู ุดุฃู ุฃุจู ููุจ ูุฒูุฌุชูุ",
                    options: ["ุณูุฑุฉ ุงููุณุฏ", "ุณูุฑุฉ ุงูุฅุฎูุงุต", "ุณูุฑุฉ ุงููุงุณ", "ุณูุฑุฉ ุงูููู"],
                    correct: 0
                },
                {
                    question: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ูุงู ุฃูู ุดููุฏ ูู ุงูุฅุณูุงูุ",
                    options: ["ุญูุฒุฉ ุจู ุนุจุฏ ุงููุทูุจ", "ุณููุฉ ุจูุช ุฎูุงุท", "ูุงุณุฑ ุจู ุนุงูุฑ", "ูุตุนุจ ุจู ุนููุฑ"],
                    correct: 1
                },
                {
                    question: "ูุง ูู ุนุฏุฏ ุฑูุนุงุช ุตูุงุฉ ุงูุชุฑุงููุญ ุงูุชู ูุงู ูุตูููุง ุงููุจู ูุญูุฏ ุตูู ุงููู ุนููู ูุณููุ",
                    options: ["8 ุฑูุนุงุช", "20 ุฑูุนุฉ", "11 ุฑูุนุฉ", "23 ุฑูุนุฉ"],
                    correct: 2
                },
                {
                    question: "ูู ูู ุงููุจู ุงูุฐู ุฃููู ูู ุงูุฌุจ ูู ูุจู ุฅุฎูุชูุ",
                    options: ["ููุณู ุนููู ุงูุณูุงู", "ูููุณ ุนููู ุงูุณูุงู", "ุฃููุจ ุนููู ุงูุณูุงู", "ูุญูู ุนููู ุงูุณูุงู"],
                    correct: 0
                },
                {
                    question: "ูุง ูู ุฃูู ูุง ูุญุงุณุจ ุนููู ุงูุนุจุฏ ููู ุงูููุงูุฉ ูู ุงูุนุจุงุฏุงุชุ",
                    options: ["ุงูุตูุงุฉ", "ุงูุฒูุงุฉ", "ุงูุตูู", "ุงูุญุฌ"],
                    correct: 0
                }
            ]
        };
        
        // ูุถุน ุงููุณุงุจูุฉ (ููุงุฎุชุจุงุฑ)
        const QUIZ_MODE = "always"; // "auto" ููุชูููุช ุงูุญููููุ "always" ููุงุฎุชุจุงุฑ
        
        // ุงูุนูุงุตุฑ ูู ุงููุงุฌูุฉ
        const elements = {
            startScreen: document.getElementById('start-screen'),
            outOfTimeScreen: document.getElementById('out-of-time-screen'),
            alreadyParticipatedScreen: document.getElementById('already-participated-screen'),
            countdownScreen: document.getElementById('countdown-screen'),
            quizScreen: document.getElementById('quiz-screen'),
            resultsScreen: document.getElementById('results-screen'),
            playerNameInput: document.getElementById('player-name'),
            startButton: document.getElementById('start-button'),
            playerWelcome: document.getElementById('player-welcome'),
            questionCounter: document.getElementById('question-counter'),
            questionText: document.getElementById('question-text'),
            optionsContainer: document.getElementById('options-container'),
            timer: document.getElementById('timer'),
            timerBar: document.getElementById('timer-bar'),
            countdownNumber: document.getElementById('countdown-number'),
            countdownText: document.getElementById('countdown-text')
        };
        
        // ุญุงูุฉ ุงููุณุงุจูุฉ
        const gameState = {
            playerName: "",
            questions: [],
            currentQuestion: 0,
            score: 0,
            timer: null,
            timeLeft: 10,
            isAnswered: false,
            startTime: 0,
            totalTime: 0,
            answers: []
        };

        // ุฏุงูุฉ ูุชุนููู ูููู
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        // ุฏุงูุฉ ููุญุตูู ุนูู ูููุฉ ูููู
        function getCookie(name) {
            const cname = name + "=";
            const decodedCookie = decodeURIComponent(document.cookie);
            const ca = decodedCookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(cname) === 0) {
                    return c.substring(cname.length, c.length);
                }
            }
            return "";
        }

        // ุฏุงูุฉ ููุชุญูู ูู ุงููุดุงุฑูุฉ ุจุงุณุชุฎุฏุงู ููุง ุงููุธุงููู
        function checkParticipationHybrid() {
            try {
                const today = new Date().toLocaleDateString('en-GB'); // ุชูุณูู DD/MM/YYYY
                
                // ุงูุชุญูู ูู ุงูุชุฎุฒูู ุงููุญูู ุฃููุงู
                const localStorageDate = localStorage.getItem('quizParticipationDate');
                
                // ุงูุชุญูู ูู ุงูููููุฒ ุซุงููุงู
                const cookieDate = getCookie("quizParticipationDate");
                
                console.log("ุชุงุฑูุฎ ุงูููู:", today);
                console.log("ุชุงุฑูุฎ ุงููุดุงุฑูุฉ (ุชุฎุฒูู ูุญูู):", localStorageDate);
                console.log("ุชุงุฑูุฎ ุงููุดุงุฑูุฉ (ูููู):", cookieDate);
                
                // ุงููุณุชุฎุฏู ุดุงุฑู ุฅุฐุง ูุงู ุฃู ูู ุงููุธุงููู ูุดูุฑ ุฅูู ูุดุงุฑูุฉ ุงูููู
                return localStorageDate === today || cookieDate === today;
            } catch (error) {
                console.error("ุฎุทุฃ ูู ุงูุชุญูู ูู ุงููุดุงุฑูุฉ:", error);
                return false;
            }
        }

        // ุฏุงูุฉ ูุชุณุฌูู ุงููุดุงุฑูุฉ ุจุงุณุชุฎุฏุงู ููุง ุงููุธุงููู
        function recordParticipationHybrid(playerName) {
            try {
                const today = new Date().toLocaleDateString('en-GB'); // ุชูุณูู DD/MM/YYYY
                
                // ุชุณุฌูู ูู ุงูุชุฎุฒูู ุงููุญูู
                localStorage.setItem('quizParticipationDate', today);
                localStorage.setItem('quizPlayerName', playerName);
                
                // ุชุณุฌูู ูู ุงูููููุฒ
                setCookie("quizParticipationDate", today, 1);
                setCookie("quizPlayerName", playerName, 1);
                
                console.log("ุชู ุชุณุฌูู ุงููุดุงุฑูุฉ ูู ููุง ุงููุธุงููู:", today);
                return true;
            } catch (error) {
                console.error("ุฎุทุฃ ูู ุชุณุฌูู ุงููุดุงุฑูุฉ:", error);
                return false;
            }
        }

        // ุฏุงูุฉ ูุฅุนุงุฏุฉ ุถุจุท ุงููุดุงุฑูุฉ (ููุงุฎุชุจุงุฑ)
        function resetParticipationHybrid() {
            try {
                // ุฅุนุงุฏุฉ ุถุจุท ุงูุชุฎุฒูู ุงููุญูู
                localStorage.removeItem('quizParticipationDate');
                localStorage.removeItem('quizPlayerName');
                
                // ุฅุนุงุฏุฉ ุถุจุท ุงูููููุฒ
                setCookie("quizParticipationDate", "", -1);
                setCookie("quizPlayerName", "", -1);
                
                console.log("ุชู ุฅุนุงุฏุฉ ุถุจุท ุงููุดุงุฑูุฉ ูู ููุง ุงููุธุงููู");
                return true;
            } catch (error) {
                console.error("ุฎุทุฃ ูู ุฅุนุงุฏุฉ ุถุจุท ุงููุดุงุฑูุฉ:", error);
                return false;
            }
        }
        
        // ุชุญุฏูุซ ุงูุชุงุฑูุฎ ูุงูููุช
        function updateDateTime() {
            const date = new Date();
            const days = ['ุงูุฃุญุฏ', 'ุงูุฅุซููู', 'ุงูุซูุงุซุงุก', 'ุงูุฃุฑุจุนุงุก', 'ุงูุฎููุณ', 'ุงูุฌูุนุฉ', 'ุงูุณุจุช'];
            const months = ['ููุงูุฑ', 'ูุจุฑุงูุฑ', 'ูุงุฑุณ', 'ุฃุจุฑูู', 'ูุงูู', 'ููููู', 'ููููู', 'ุฃุบุณุทุณ', 'ุณุจุชูุจุฑ', 'ุฃูุชูุจุฑ', 'ููููุจุฑ', 'ุฏูุณูุจุฑ'];
            
            const dayName = days[date.getDay()];
            const day = date.getDate();
            const month = months[date.getMonth()];
            const year = date.getFullYear();
            
            const formattedDate = `${day} ${month} ${year}`;
            
            document.getElementById('day-name').textContent = dayName;
            document.getElementById('current-date').textContent = formattedDate;
            
            document.getElementById('day-name-out').textContent = dayName;
            document.getElementById('current-date-out').textContent = formattedDate;
            
            document.getElementById('day-name-participated').textContent = dayName;
            document.getElementById('current-date-participated').textContent = formattedDate;
        }
        
        // ุงูุญุตูู ุนูู ุงูุชุงุฑูุฎ ุงูุญุงูู ุจุชูุณูู DD/MM/YYYY
        function getTodayFormatted() {
            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const year = today.getFullYear();
            
            return `${day}/${month}/${year}`;
        }
        
        // ุงูุชุญูู ูู ููุช ุงููุณุงุจูุฉ
        function checkQuizTimeStatus() {
            // ููุงุฎุชุจุงุฑ: ุงููุณุงุจูุฉ ูุชุงุญุฉ ุฏุงุฆููุง ุฅุฐุง ูุงู ุงููุถุน "always"
            if (QUIZ_MODE === "auto") {
                return {
                    isAvailable: true,
                    message: "ุงููุณุงุจูุฉ ูุชุงุญุฉ ุงูุขู!"
                };
            }
            
            const now = new Date();
            const hours = now.getHours();
            
            // ุงููุณุงุจูุฉ ูุชุงุญุฉ ูู ุงูุณุงุนุฉ 10 ุตุจุงุญูุง ุญุชู 10 ูุณุงุกู
            if (hours >= 19 && hours < 20) {
                return {
                    isAvailable: true,
                    message: "ุงููุณุงุจูุฉ ูุชุงุญุฉ ุงูุขู!"
                };
            } else if (hours < 10) {
                return {
                    isAvailable: false,
                    message: "ุงููุณุงุจูุฉ ุณุชุจุฏุฃ ูู ุงูุณุงุนุฉ 10:00 ุตุจุงุญูุง"
                };
            } else {
                return {
                    isAvailable: false,
                    message: "ุงูุชูุช ุงููุณุงุจูุฉ ูููููุ ุนุฏ ุบุฏูุง ูู ุงูุณุงุนุฉ 10:00 ุตุจุงุญูุง"
                };
            }
        }
        
        // ุชุญุฏูุซ ุฑุณุงูุฉ ุงูููุช
        function updateTimeMessage() {
            const status = checkQuizTimeStatus();
            document.getElementById('time-message').textContent = status.message;
        }
        
        // ุฅุถุงูุฉ ุฒุฑ ุฅุนุงุฏุฉ ุงูุถุจุท ููุงุฎุชุจุงุฑ
        function addResetButton() {
            const resetButton = document.createElement('button');
            resetButton.textContent = "ุฅุนุงุฏุฉ ุถุจุท ุงููุดุงุฑูุฉ (ููุงุฎุชุจุงุฑ ููุท)";
            resetButton.className = "mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl text-sm";
            resetButton.onclick = function() {
                resetParticipationHybrid();
                alert('ุชู ุฅุนุงุฏุฉ ุถุจุท ุงููุดุงุฑูุฉ. ุณูุชู ุชุญุฏูุซ ุงูุตูุญุฉ.');
                location.reload();
            };
            
            const container = document.querySelector('#already-participated-screen .bg-white\\/10');
            if (container) {
                container.appendChild(resetButton);
            }
        }
        
        // ุจุฏุก ุงูุนุฏ ุงูุชูุงุฒูู
        function startCountdown() {
            elements.startScreen.classList.add('hidden');
            elements.countdownScreen.classList.remove('hidden');
            
            let count = 5;
            elements.countdownNumber.textContent = count;
            
            const countdownInterval = setInterval(() => {
                count--;
                elements.countdownNumber.textContent = count;
                
                if (count <= 0) {
                    clearInterval(countdownInterval);
                    elements.countdownScreen.classList.add('hidden');
                    elements.quizScreen.classList.remove('hidden');
                    
                    gameState.startTime = Date.now();
                    showQuestion();
                }
            }, 1000);
        }
        
        // ุนุฑุถ ุงูุณุคุงู ุงูุญุงูู
        function showQuestion() {
            const question = gameState.questions[gameState.currentQuestion];
            
            elements.questionCounter.textContent = `ุงูุณุคุงู ${gameState.currentQuestion + 1} ูู ${gameState.questions.length}`;
            elements.questionText.textContent = question.question;
            
            elements.optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'bg-white/5 border border-white/10 p-4 rounded-lg cursor-pointer hover:bg-white/10 transition-colors';
                optionElement.textContent = option;
                optionElement.onclick = () => handleAnswer(index);
                elements.optionsContainer.appendChild(optionElement);
            });
            
            gameState.isAnswered = false;
            startTimer();
        }
        
        // ูุนุงูุฌุฉ ุงูุฅุฌุงุจุฉ
        function handleAnswer(selectedOption) {
            if (gameState.isAnswered) return;
            
            gameState.isAnswered = true;
            clearInterval(gameState.timer);
            
            const question = gameState.questions[gameState.currentQuestion];
            const isCorrect = selectedOption === question.correct;
            
            // ุญุณุงุจ ุงูููุช ุงููุณุชุบุฑู ููุฅุฌุงุจุฉ
            const answerTime = (10 - gameState.timeLeft);
            
            // ุญุณุงุจ ุงูููุงุท (ุฃูุตู 100 ููุทุฉ ููู ุณุคุงู)
            let points = 0;
            if (isCorrect) {
                // ูููุง ูุงูุช ุงูุฅุฌุงุจุฉ ุฃุณุฑุนุ ูููุง ุฒุงุฏุช ุงูููุงุท
                points = Math.max(10, Math.round(100 - (answerTime * 9)));
                gameState.score += points;
            }
            
            // ุฅุถุงูุฉ ุงูููุช ุงูุฅุฌูุงูู
            gameState.totalTime += answerTime;
            
            // ุชุนุทูู ุฌููุน ุงูุฎูุงุฑุงุช
            const options = elements.optionsContainer.children;
            Array.from(options).forEach(option => {
                option.classList.add('option-disabled');
            });
            
            // ุฅุถุงูุฉ ุงูุชุฃุซูุฑุงุช ุงูุจุตุฑูุฉ ููุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุงูุฎุงุทุฆุฉ
            if (selectedOption >= 0) {
                options[selectedOption].classList.add(isCorrect ? 'option-correct' : 'option-wrong');
            }
            
            // ุฅุธูุงุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ุฏุงุฆูุงู
            if (!isCorrect) {
                options[question.correct].classList.add('option-correct');
            }

            // ุชุฎุฒูู ูุนูููุงุช ุงูุฅุฌุงุจุฉ
            gameState.answers.push({
                question: question.question,
                selectedAnswer: selectedOption >= 0 ? question.options[selectedOption] : "ูู ูุชู ุงูุฅุฌุงุจุฉ",
                correctAnswer: question.options[question.correct],
                isCorrect: isCorrect,
                time: answerTime,
                points: points
            });

            // ุงูุงูุชูุงู ุฅูู ุงูุณุคุงู ุงูุชุงูู ุฃู ุฅุธูุงุฑ ุงููุชุงุฆุฌ ุจุนุฏ ูุชุฑุฉ ูุตูุฑุฉ
            setTimeout(() => {
                if (gameState.currentQuestion < gameState.questions.length - 1) {
                    gameState.currentQuestion++;
                    showQuestion();
                } else {
                    showResults();
                }
            }, 1500);
        }

        // ุจุฏุก ุงููุคูุช
        function startTimer() {
            gameState.timeLeft = 10;
            elements.timer.textContent = gameState.timeLeft;
            elements.timerBar.style.width = '100%';
            
            clearInterval(gameState.timer);
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                elements.timer.textContent = gameState.timeLeft;
                elements.timerBar.style.width = `${(gameState.timeLeft / 10) * 100}%`;
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    handleTimeUp();
                }
            }, 1000);
        }

        // ูุนุงูุฌุฉ ุงูุชูุงุก ุงูููุช
        function handleTimeUp() {
            if (gameState.isAnswered) return;
            handleAnswer(-1);
        }

        // ุนุฑุถ ุงููุชุงุฆุฌ
        async function showResults() {
            try {
                elements.quizScreen.classList.add('hidden');
                elements.resultsScreen.classList.remove('hidden');

                const playerData = {
                    playerName: gameState.playerName,
                    score: gameState.score,
                    totalTime: gameState.totalTime,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                };

                await db.collection('scores').add(playerData);

                document.getElementById('final-name').textContent = `ุงูุงุณู: ${gameState.playerName}`;
                document.getElementById('final-score').innerHTML = `
                    ุงูููุงุท: ${gameState.score}<br>
                    ุงูููุช ุงูุฅุฌูุงูู: ${gameState.totalTime.toFixed(2)} ุซุงููุฉ
                `;

                const answersHtml = gameState.answers.map((answer, index) => `
                    <div class="bg-white/5 p-4 rounded-xl">
                        <div class="font-bold mb-2">ุงูุณุคุงู ${index + 1}</div>
                        <div class="text-sm opacity-90 mb-2">${answer.question}</div>
                        <div class="text-sm ${answer.isCorrect ? 'text-green-400' : 'text-red-400'}">
                            ุฅุฌุงุจุชู: ${answer.selectedAnswer}
                            ${!answer.isCorrect ? `<br>ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: ${answer.correctAnswer}` : ''}
                        </div>
                        <div class="text-sm mt-2">
                            ุงูููุช: ${answer.time.toFixed(2)} ุซุงููุฉ
                            <br>
                            ุงูููุงุท: ${answer.points}
                        </div>
                    </div>
                `).join('');

                document.getElementById('answers-review').innerHTML = answersHtml;
                lucide.createIcons();

            } catch (error) {
                console.error('Error saving results:', error);
                alert('ุญุฏุซ ุฎุทุฃ ูู ุญูุธ ุงููุชูุฌุฉ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.');
            }
        }

        // ุชููุฆุฉ ุงููุณุงุจูุฉ
        function initializeQuiz() {
            try {
                updateDateTime();
                
                // ุฅุถุงูุฉ ุฒุฑ ุฅุนุงุฏุฉ ุงูุถุจุท ููุงุฎุชุจุงุฑ
                setTimeout(addResetButton, 500);
                
                // ุงูุชุญูู ูู ููุช ุงููุณุงุจูุฉ
                const quizTimeStatus = checkQuizTimeStatus();
                
                if (quizTimeStatus.isAvailable) {
                    // ุงููุณุงุจูุฉ ูุชุงุญุฉ ุญุงููุงู
                    
                    // ุงูุชุญูู ูู ุงููุดุงุฑูุฉ ุงูุณุงุจูุฉ ุจุงุณุชุฎุฏุงู ุงููุธุงู ุงููุฌูู
                    if (checkParticipationHybrid()) {
                        // ุงููุณุชุฎุฏู ุดุงุฑู ุจุงููุนู ุงูููู
                        console.log("ุงููุณุชุฎุฏู ุดุงุฑู ุจุงููุนู ุงูููู");
                        elements.alreadyParticipatedScreen.classList.remove('hidden');
                    } else {
                        // ุงููุณุชุฎุฏู ูู ูุดุงุฑู ุจุนุฏ
                        console.log("ุงููุณุชุฎุฏู ูู ูุดุงุฑู ุจุนุฏ ุงูููู");
                        elements.startScreen.classList.remove('hidden');
                    }
                } else {
                    // ุงููุณุงุจูุฉ ุบูุฑ ูุชุงุญุฉ ุญุงููุงู
                    elements.outOfTimeScreen.classList.remove('hidden');
                    updateTimeMessage();
                }
                
                // ุชุญุฏูุซ ุฑุณุงูุฉ ุงูููุช ูู ุฏูููุฉ
                setInterval(updateTimeMessage, 60000);
            } catch (error) {
                console.error('Error initializing quiz:', error);
                alert('ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุงููุณุงุจูุฉ. ูุฑุฌู ุชุญุฏูุซ ุงูุตูุญุฉ.');
            }
        }

        // ุจุฏุก ุงููุณุงุจูุฉ
        async function startQuiz() {
            try {
                // ุงูุชุญูู ูู ุงููุดุงุฑูุฉ ุงูุณุงุจูุฉ ุจุงุณุชุฎุฏุงู ุงููุธุงู ุงููุฌูู
                if (checkParticipationHybrid()) {
                    // ุงููุณุชุฎุฏู ุดุงุฑู ุจุงููุนู ุงูููู
                    elements.startScreen.classList.add('hidden');
                    elements.alreadyParticipatedScreen.classList.remove('hidden');
                    return;
                }
                
                gameState.playerName = elements.playerNameInput.value.trim();
                
                // ุชุณุฌูู ุงููุดุงุฑูุฉ ุจุงุณุชุฎุฏุงู ุงููุธุงู ุงููุฌูู
                recordParticipationHybrid(gameState.playerName);
                
                // ุชุณุฌูู ุงููุดุงุฑู ูู Firebase ููุฅุญุตุงุฆูุงุช
                try {
                    await db.collection('participants').add({
                        playerName: gameState.playerName,
                        participationDate: getTodayFormatted(),
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } catch (error) {
                    console.error('Error recording participation in Firebase:', error);
                    // ูุง ูููู ุงููุณุงุจูุฉ ูู ุญุงูุฉ ูุดู ุงูุชุณุฌูู ูู Firebase
                }
                
                // ุชุญุฏูุฏ ุงูููู ุงูุญุงูู ูู ุงูุดูุฑ
                const today = new Date();
                const currentDay = today.getDate(); // ููู ุงูุดูุฑ ุงูุญุงูู (1-31)
                
                // ุชุญุฏูุฏ ุงูููู ุงูููุงุณุจ ูู ุจูู ุงูุฃุณุฆูุฉ
                let questionDay = currentDay;
                
                if (questionDay > 29) {
                    questionDay = 29; // ุขุฎุฑ ููู ูู ุจูู ุงูุฃุณุฆูุฉ
                } else if (questionDay < 15) {
                    questionDay = 15; // ุฃูู ููู ูู ุจูู ุงูุฃุณุฆูุฉ
                }
                
                console.log(`ุงูููู ุงูุญุงูู: ${currentDay}ุ ููู ุงูุฃุณุฆูุฉ ุงููุฎุชุงุฑ: ${questionDay}`);
                
                // ุงูุชุญูู ูู ูุฌูุฏ ุฃุณุฆูุฉ ููููู ุงููุญุฏุฏ
                if (!ramadanQuestions[questionDay]) {
                    console.error(`ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ููููู ${questionDay}`);
                    alert('ุนุฐุฑุงูุ ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูููู');
                    return;
                }
                
                // ุชุญุฏูุซ ุจูู ุงูุฃุณุฆูุฉ ุจุงุณุชุฎุฏุงู ุฃุณุฆูุฉ ุงูููู ุงููุญุฏุฏ
                gameState.questions = [...ramadanQuestions[questionDay]];
                
                elements.startScreen.classList.add('hidden');
                elements.playerWelcome.textContent = `ูุฑุญุจุงู ${gameState.playerName}!`;
                
                startCountdown();
            } catch (error) {
                console.error('Error starting quiz:', error);
                                alert('ุญุฏุซ ุฎุทุฃ ูู ุจุฏุก ุงููุณุงุจูุฉ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.');
            }
        }

        // ุงูุชุญูู ูู ุฅุฏุฎุงู ุงูุงุณู
        elements.playerNameInput.addEventListener('input', function() {
            const playerName = this.value.trim();
            if (playerName.length >= 3) {
                elements.startButton.disabled = false;
                elements.startButton.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                elements.startButton.disabled = true;
                elements.startButton.classList.add('opacity-50', 'cursor-not-allowed');
            }
        });

        // ุฒุฑ ุจุฏุก ุงููุณุงุจูุฉ
        elements.startButton.addEventListener('click', startQuiz);

        // ุชููุฆุฉ ุงูุฃููููุงุช
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            initializeQuiz();
        });
    </script>
</body>
</html>
